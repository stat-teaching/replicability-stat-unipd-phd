{
  "hash": "97f56c1a03c6f8cae2a3126afedc3d70",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Multiverse\nsubtitle: Replicability Crisis in Science?\n---\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nknitr::opts_chunk$set(echo = TRUE,\n                      dev = \"svg\",\n                      fig.align = \"center\")\n\nlibrary(kableExtra)\nlibrary(tidyverse)\nlibrary(cowplot)\n\nspecif <- readRDS(\"objects/plessen2023-specification-data.rds\")\nspecif_res <- specif$specif |> \n  mutate(res = map(fit, filor::summary_rma)) |> \n  unnest(res)\n\nmtheme <- function(){\n  theme_minimal(15)\n}\n\ntheme_set(mtheme())\n```\n:::\n\n\n\n\n# Multiverse analysis\n\n## Multiverse analysis\n\nsteegen here\n\n# Multiverse analysis principles\n\n## Researcher degrees of freedom\n\nA single dataset is not associated with a single, true analysis. There are many alternatives (scenarios) that the researcher consciously or not decide to report.\n\n## Plausible vs all options\n\nNot all scenarios are equally plausible or reasonable.\n\n## The impact of different scenarios\n\nThe impact of choosing one alternative over another is not easy to predict and often neglegtec. The only option is formalizing a plausible multiverse and exploring the results.\n\n# Multiverse meta-analysis\n\n## Meta-analysis many choices\n\nIn meta-analysis there are a lot of arbitrary choices.\n\n## An example from @Plessen2023-ex\n\n![](img/plessen2023.png)\n\n## An example from @Plessen2023-ex\n\n- Over the last four decades, more than 80 meta-analyses have examined the efficacy of psychotherapies for depression\n- More than 700 randomised controlled trials (RCTs)\n- Not all these studies goes in the same direction\n\n## An example from @Plessen2023-ex\n\nDiscrepancies in results could be due to:\n\n### Which factors (which data to meta-analyze)\n\n- inclusion/esclusion of a subset of studies (e.g., low quality studies)\n- type of control group or control therapy\n- ...\n\n### How factors (how to meta-analyze)\n\n- type of model (e.g., equal vs random)\n- model complexity (two-level, three level, robust, etc.)\n- correcting for publication bias\n\n# Descriptive tools\n\n## Estimated effect of interest\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nspecif_res |> \n  ggplot(aes(x = b)) +\n  geom_histogram(bins = 50,\n                 fill = \"dodgerblue\",\n                 col = \"black\") +\n  ylab(\"Frequency\") +\n  xlab(\"Estimated Effect\") +\n  geom_vline(xintercept = 0, col = \"red\") +\n  geom_vline(xintercept = 0.25, col = \"green\")\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-2-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n## Estimated effect as a function of scenarios\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nabove <- specif_res |> \n  arrange(b) |> \n  mutate(id = 1:n()) |> \n  ggplot(aes(x = id, y = b)) +\n  geom_segment(aes(xend = id, y = ci.lb, yend = ci.ub)) +\n  geom_hline(yintercept = 0, col = \"red\") +\n  geom_hline(yintercept = 0.25, col = \"green\") +\n  theme(axis.title.y = element_blank(),\n        axis.text.x = element_blank(),\n        axis.title.x = element_blank())\n  \nbelow <- specif_res |> \n  arrange(b) |> \n  mutate(id = 1:n()) |> \n  pivot_longer(c(\n    target_group,\n    format,\n    diagnosis,\n    risk_of_bias,\n    type,\n    method\n  )) |> \n  ggplot(aes(x = id, y = value)) +\n  geom_raster() +\n  theme(axis.title.y = element_blank(),\n        axis.text.x = element_blank()) +\n  xlab(\"Specification\")\n\nplot_grid(above, below, nrow = 2, align = \"hv\")\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-3-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n## Fixing a specific parameter\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nspecif_res |> \n  arrange(b) |> \n  mutate(id = 1:n()) |> \n  ggplot(aes(x = b, fill = diagnosis)) +\n  geom_density()\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-4-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n# Inferential tools\n\n## Specification Curve @Simonsohn2020-sr\n\nThe idea of the specification curve is both descriptive (see previous plots) and inferential.\n\nInferentially, the approach requires to generate a new dataset under the null hypothesis and compare with the observed value.\n\n## Specification Curve in meta-analysis @Plessen2023-ex\n\n@Plessen2023-ex describe how to implement the method for meta-analysis.\n\n1. For each dataset/model generate $k_s$ data (where $k$ is the number of effect in the specification $s$) sampling from $\\mathcal{N}(0,\\sigma^2_{\\epsilon_i} + \\tau^2)$.\n2. Fit the model (FE or RE)\n3. Get the specification curve\n4. Repeat 1-3 for a large number of times (e.g., 1000)\n5. Compute the 2.5% and 95.75% quantiles\n6. Check if the observed specification is outside the 95% CI\n\n## Specification Curve in meta-analysis @Plessen2023-ex\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nspecif$SD |> \n  filter(spec %in% sample(1:1000, 1)) |> \n  ggplot(aes(x = id, y = b)) +\n  geom_line(aes(group = spec))\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-5-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n## Specification Curve in meta-analysis @Plessen2023-ex\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nspecif$SD |> \n  filter(spec %in% sample(1:1000, 1)) |> \n  ggplot(aes(x = id, y = b)) +\n  geom_line(aes(group = spec))\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-6-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n## Specification Curve in meta-analysis @Plessen2023-ex\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nspecif$SD |> \n  filter(spec %in% sample(1:1000, 1)) |> \n  ggplot(aes(x = id, y = b)) +\n  geom_line(aes(group = spec))\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-7-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n## Specification Curve in meta-analysis @Plessen2023-ex\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code  code-fold=\"true\"}\nspecif_res <- specif_res |> \n  arrange(b) |> \n  mutate(id = 1:n())\n\nggplot(data = specif$SD,\n       aes(x = id, y = b)) +\n  geom_line(aes(group = spec)) +\n  geom_line(data = specif_res,\n            aes(x = id, y = b),\n            col = \"firebrick\",\n            lwd = 2)\n```\n\n::: {.cell-output-display}\n![](00-multiverse-meta-analysis_files/figure-html/unnamed-chunk-8-1.svg){fig-align='center' width=672}\n:::\n:::\n\n\n\n\n## PIMA\n\n**P**-selection **I**nference in **M**ultiverse **M**eta-analysis (PIMA) is an inferential approach to multiverse analysis is an inferential framework for:\n\n- obtaining an overall p-value across the multiverse\n- obtaining corrected p-values based on resampling methods\n\n# Important aspects of multiverse analysis\n\n## Important aspects of multiverse analysis\n\n- Include only plausible scenarios. Regardless the aim (description or inference)\n\n## References\n\n- @Steegen2016-lz\n- @Hall2022-mp for data visualization\n- @Liu2021-xv for data visualization\n\n",
    "supporting": [
      "00-multiverse-meta-analysis_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}